name: Update Snake GIF

on:
  push:
    branches:
      - main  # Ð²ÐµÑ‚ÐºÐ°, ÐºÐ¾Ñ‚Ð¾Ñ€ÑƒÑŽ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑˆÑŒ

jobs:
  update-snake:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Get commit count
        id: commits
        run: |
          echo "COMMITS=$(git rev-list --count HEAD)" >> $GITHUB_ENV

      - name: Generate snake GIF
        run: |
          echo "ðŸ Snake eats $COMMITS commits!" > snake.txt
          convert -size 400x100 xc:white -gravity Center \
                  -font Arial -pointsize 20 -fill black \
                  label:@"snake.txt" snake.gif

      - name: Commit GIF
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add snake.gif
          git commit -m "Update snake GIF"
          git push
